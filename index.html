<!DOCTYPE html><html><head><title>Voice Conference and Broadcast</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Voice Conference and Broadcast"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Voice Conference and Broadcast</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn how to use Twilio's conference features and REST API to build a conference line with advanced controls. Additionally learn how to build a voice broadcast system as part of this Rapid Response application.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Voice Conference and Broadcast" class="chapter"><div data-file="src/main/java/com/twilio/conferencebroadcast/App.java" class="step"><h2 id="about-this-application">About this application</h2>
<p><img src="http://howtodocs.s3.amazonaws.com/RRK-
screenshot.png" alt="Rapid Response Kit"></p>
<p>This <a href="//sparkjava.com/">Spark</a> sample application is
inspired by the <a href="https://github.com/Twilio-org
/rapid-response-kit">Rapid Response Kit</a>, built by Twilio and <a href="https://www.twilio.com/blog/2014/03/open-source-nonprofit-tools-
twilio-org-rapid-response-kit-nt.html">used all over the
world</a> by organizations who need to act
quickly in disastrous situations.</p>
<p>Aid workers can use the tools in this app to communicate immediately
with a large group of volunteers. In situations where all parties need
to talk at once the organizer can quickly spin up a conference line. In
other situations she can broadcast a spoken message to a list of
volunteer phone numbers.</p>
<p>To run this sample app yourself, <a href="https://github.com/TwilioDevEd/conference-
broadcast-spark">download the code and follow the
instructions on GitHub</a>. You might also want to click around the views for
this app, since in this tutorial we will only be covering the Twilio
pieces.</p>
<p>Let&#39;s get started! Click the right arrow above to move to the next step
of the tutorial.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//sparkjava.com/documentation.html">Getting Started with Spark</a></li>
<li><a href="//www.twilio.com/docs/java/install">Getting started with the Twilio Java SDK</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/App.java" data-highlight="42-67" class="step"><h2 id="create-a-conference-number">Create a Conference Number</h2>
<p>Before we can call our conference line we need to configure one of our
Twilio numbers to send our web application an HTTP request when we get
an incoming call.</p>
<p><a href="//www.twilio.com/user/account/phone-numbers/incoming">Click on one of your numbers</a>
and configure the Voice URL to point to our app. In our code the route will
be <code>/conference</code>.</p>
<p><img src="//s3.amazonaws.com/howtodocs/number-
config.png" alt="Configuring a Twilio Number"></p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/help/faq/voice/how-do-i-assign-my-twilio-number-to-my-voice-application">Configuring Twilio Numbers for
Voice</a></li>
<li><a href="//www.twilio.com/blog/2013/10/test-your-webhooks-locally-with-ngrok.html">Using ngrok to test your Twilio webhooks
locally</a></li>
<li><a href="//sparkjava.com/documentation.html#routes">Spark Routing guide</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/ConferenceController.java" data-highlight="75-110" class="step"><h2 id="create-a-simple-conference-call">Create a Simple Conference Call</h2>
<p>Our Twilio number is now configured to <a href="https://www.twilio.com/docs/api/twiml/twilio_request">send HTTP
requests</a> to this
controller method on any incoming voice calls. Our app responds with
<a href="https://www.twilio.com/docs/api/twiml">TwiML</a> to tell Twilio how to
handle the call.</p>
<p>We use the Twilio Java library to generate some TwiML that tells
Twilio to <a href="https://www.twilio.com/docs/api/twiml/dial"><code>Dial</code></a> into a
<a href="https://www.twilio.com/docs/api/twiml/conference">Conference</a> that
we&#39;re naming <code>&quot;RapidResponseRoom&quot;</code>. This means that anyone who calls
your Twilio number will automatically join this conference.</p>
<p>Next we&#39;ll turn this into a moderated conference line, with a moderator
and listeners.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/quickstart/java/twiml/say-response">Java TwiML
Quickstart</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/conference#attributes-waitUrl">Conference waitUrl parameter</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/ConferenceController.java" data-highlight="45-73" class="step"><h2 id="create-a-moderated-conference">Create a Moderated Conference</h2>
<p>In this scenario we ask for the caller&#39;s role before we connect them to
the conference. These roles are:</p>
<ul>
<li><strong>Moderator:</strong> can start and end the conference</li>
<li><strong>Speaker:</strong> can speak on the conference call</li>
<li><strong>Listener:</strong> is muted and can only listen to the call</li>
</ul>
<p>In this controller we <a href="https://www.twilio.com/docs/api/twiml/say"><code>Say</code></a>
a simple message and then ask the caller to choose a role. Next we tell
Twilio to <a href="https://www.twilio.com/docs/api/twiml/gather"><code>Gather</code></a> a
button press from the caller&#39;s phone so we know which role they want to
use.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/quickstart/java/twiml/say-response">Java TwiML
Quickstart</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/ConferenceController.java" data-highlight="75-110" class="step"><h2 id="connect-to-a-moderated-conference">Connect to a Moderated Conference</h2>
<p>The <em>gather</em> verb from the previous step included an <a href="https://www.twilio.com/docs/api/twiml/gather#attributes-action"><code>action</code></a> parameter
that took an absolute or relative URL as a value â€” in our case, the
<code>conference/connect</code> route.</p>
<p>When the caller finishes entering digits Twilio makes a GET or POST
request to this URL including a
<a href="//www.twilio.com/docs/api/twiml/gather#attributes-
action-parameters"><code>Digits</code></a> parameter with the number our caller chose.</p>
<p>We use that parameter to set a couple variables, <code>@muted</code> and
<code>@moderator</code>, which we then use to configure our
<a href="//www.twilio.com/docs/api/twiml/dial"><code>Dial</code></a> and
<a href="//www.twilio.com/docs/api/twiml/conference"><code>Conference</code></a> TwiML
elements.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/twiml/conference#attributes-muted">Conference: <code>muted</code></a></li>
<li><a href="//www.twilio.com/docs/api/twiml/conference#attributes-startConferenceOnEnter">Conference:
<code>startConferenceOnEnter</code></a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/RecordingController.java" class="step"><h2 id="voice-broadcast">Voice Broadcast</h2>
<p><img src="http://howtodocs.s3.amazonaws.com/RRK-broadcast.png" alt="Rapid Response Kit"></p>
<p>In addition to hosting conference calls, an organizer can use our
application to broadcast a voice message to a list of
phone numbers. She can do this by choosing a recording from a dropdown,
entering a list of phone numbers and clicking &#39;Submit&#39;.</p>
<p>To power this feature, we&#39;ll use Twilio&#39;s REST API to fetch all of the
recordings associated with our account. If our organizer wants to record
a new message, we&#39;ll call her phone and record her response.</p>
<p>Let&#39;s take a look at the code.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/quickstart/java/twiml/record-caller-leave-message">Recording: Java
Quickstart</a></li>
<li><a href="//www.twilio.com/docs/quickstart/java/rest/call-request">Make Outgoing Calls: Java
Quickstart</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/RecordingController.java" data-highlight="79-96" class="step"><h2 id="fetch-recordings">Fetch Recordings</h2>
<p>This route fetches all of the
<a href="https://www.twilio.com/docs/api/rest/recording#list-get-
example-1"><code>recordings</code></a> associated with our Twilio account. We could filter these
results by date or call sid using Twilio&#39;s API, but for this example
we just pull all recordings.</p>
<p>In order to use Twilio&#39;s handy API we need to first create our Twilio
client, which we can easily do by passing our credentials.</p>
<p>Once we get all of the recordings we need to render a JSON response of
our recordings object. This route will be called by our Javascript on
page load.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/rest/recording">Twilio REST API:
Recordings</a></li>
<li><a href="//www.twilio.com/docs/api/rest/recording#list-get-example-4">Twilio REST API: Filter Recordings
Results</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/BroadcastController.java" data-highlight="141-158" class="step"><h2 id="recording-a-new-message">Recording a new Message</h2>
<p>If the organizer needs to make a new recording, we simply call her
and record the call. Twilio makes this simple with the
<a href="//www.twilio.com/docs/api/twiml/record"><code>Record</code></a> verb.</p>
<p>Here we <code>Say</code> something to the caller and then <code>Record</code> her message.
There are many more options we can pass to Record, but here we simply
tell it to stop recording when &#39;*&#39; is pressed and to redirect to <code>broadcast/hangup</code>,
so the call drops when the recording is finished.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/twiml/record#attributes">Recording: Optional Attributes</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/conferencebroadcast/controllers/BroadcastController.java" data-highlight="87-119" class="step"><h2 id="broadcast-a-recorded-message">Broadcast a Recorded Message</h2>
<p>This controller processes our voice broadcast webform, starting with
the phone numbers our organizer provided.</p>
<p>Next we initiate a phone call to each number using Twilio&#39;s REST API.</p>
<p>When Twilio connects this call it will make a request to the
<a href="www.twilio.com/docs/api/rest/making-calls#url-parameter"><code>url</code></a>
parameter to get further instructions. We include a
<code>recording_url</code> parameter in that URL so that our <code>broadcast.play</code>
controller will know which recording to use.</p>
<p>That makes the work for our <code>broadcast/play</code> route simple â€” we just
<a href="//www.twilio.com/docs/api/twiml/play"><code>Play</code></a> the recording.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/twiml/twilio_request">Twilio Voice: Twilio&#39;s Request</a></li>
</ul>
</div><div class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it! We&#39;ve just implemented two major features of a Rapid Response
Kit! Maybe in the future we can tackle some of the other features and
build a full-fledge kit!</p>
<p>If you&#39;re a Java developer working with Twilio, you might enjoy these
other tutorials:</p>
<p><a href="//www.twilio.com/docs/howto/walkthrough/automated-survey/java/spark"><strong>Automated Survey</strong></a></p>
<p>Instantly collect structured data from your users with a survey
conducted over a voice call or SMS text messages. Learn how to create
your own survey in Java.</p>
<p><a href="//www.twilio.com/docs/howto/walkthrough/server-notifications/java/spark"><strong>SMS and MMS Notifications</strong></a></p>
<p>Send SMS alerts to a list of system administrators if something goes wrong on your server.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking out this tutorial! If you have any feedback to share
with us, we&#39;d love to hear it. Tweet
<a href="http://twitter.com/twilio">@twilio</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="src/main/java/com/twilio/conferencebroadcast/App.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3Q7CgppbXBvcnQgY29tLnR3aWxpby5jb25mZXJlbmNlYnJvYWRjYXN0LmNvbnRyb2xsZXJzLkJyb2FkY2FzdENvbnRyb2xsZXI7CmltcG9ydCBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QuY29udHJvbGxlcnMuQ29uZmVyZW5jZUNvbnRyb2xsZXI7CmltcG9ydCBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QuY29udHJvbGxlcnMuSG9tZUNvbnRyb2xsZXI7CmltcG9ydCBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QuY29udHJvbGxlcnMuUmVjb3JkaW5nQ29udHJvbGxlcjsKaW1wb3J0IGNvbS50d2lsaW8uY29uZmVyZW5jZWJyb2FkY2FzdC5saWIuQXBwU2V0dXA7CmltcG9ydCBzcGFyay5TcGFyazsKaW1wb3J0IHNwYXJrLnRlbXBsYXRlLm11c3RhY2hlLk11c3RhY2hlVGVtcGxhdGVFbmdpbmU7CgppbXBvcnQgc3RhdGljIHNwYXJrLlNwYXJrLio7CgovKioKICogTWFpbiBhcHBsaWNhdGlvbiBjbGFzcy4gVGhlIGVudmlyb25tZW50IGlzIHNldCB1cCBoZXJlLCBhbmQgYWxsIG5lY2Vzc2FyeSBzZXJ2aWNlcyBhcmUgcnVuLgogKi8KcHVibGljIGNsYXNzIEFwcCB7CiAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgQXBwU2V0dXAgYXBwU2V0dXAgPSBuZXcgQXBwU2V0dXAoKTsKCiAgICAvKioKICAgICAqIFNldHMgdGhlIHBvcnQgaW4gd2hpY2ggdGhlIGFwcGxpY2F0aW9uIHdpbGwgcnVuLiBUYWtlcyB0aGUgcG9ydCB2YWx1ZSBmcm9tIFBPUlQKICAgICAqIGVudmlyb25tZW50IHZhcmlhYmxlLCBpZiBub3Qgc2V0LCB1c2VzIFNwYXJrIGRlZmF1bHQgcG9ydCA0NTY3LgogICAgICovCiAgICBwb3J0KGFwcFNldHVwLmdldFBvcnROdW1iZXIoKSk7CgogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBlbnRpdHkgbWFuYWdlciBiYXNlZCBvbiBlbnZpcm9ubWVudCB2YXJpYWJsZSBEQVRBQkFTRV9VUkwgYW5kIGluamVjdHMgaXQgaW50bwogICAgICogQXBwb2ludG1lbnRTZXJ2aWNlIHdoaWNoIGhhbmRsZXMgYWxsIERCIG9wZXJhdGlvbnMuCiAgICAgKi8KICAgIC8vIEVudGl0eU1hbmFnZXJGYWN0b3J5IGZhY3RvcnkgPSBhcHBTZXR1cC5nZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgpOwoKICAgIC8qKgogICAgICogU3BlY2lmaWVzIHRoZSBkaXJlY3Rvcnkgd2l0aGluIHJlc291cmNlcyB0aGF0IHdpbGwgYmUgcHVibGljbHkgYXZhaWxhYmxlIHdoZW4gdGhlCiAgICAgKiBhcHBsaWNhdGlvbiBpcyBydW5uaW5nLiBQbGFjZSBzdGF0aWMgd2ViIGZpbGVzIGluIHRoaXMgZGlyZWN0b3J5IChKUywgQ1NTKS4KICAgICAqLwogICAgU3Bhcmsuc3RhdGljRmlsZUxvY2F0aW9uKCIvcHVibGljIik7CgogICAgQ29uZmVyZW5jZUNvbnRyb2xsZXIgY29uZmVyZW5jZUNvbnRyb2xsZXIgPSBuZXcgQ29uZmVyZW5jZUNvbnRyb2xsZXIoKTsKICAgIEJyb2FkY2FzdENvbnRyb2xsZXIgYnJvYWRjYXN0Q29udHJvbGxlciA9IG5ldyBCcm9hZGNhc3RDb250cm9sbGVyKCk7CiAgICBSZWNvcmRpbmdDb250cm9sbGVyIHJlY29yZGluZ0NvbnRyb2xsZXIgPSBuZXcgUmVjb3JkaW5nQ29udHJvbGxlcigpOwoKICAgIC8qKgogICAgICogSG9tZSByb3V0ZQogICAgICovCiAgICBnZXQoIi8iLCBuZXcgSG9tZUNvbnRyb2xsZXIoKS5pbmRleCwgbmV3IE11c3RhY2hlVGVtcGxhdGVFbmdpbmUoKSk7CgogICAgLyoqCiAgICAgKiBEZWZpbmVzIHJvdXRlcyBmb3IgZXZlcnl0aGluZyByZWxhdGVkIHRvIGNvbmZlcmVuY2UgY2FsbHMKICAgICAqLwogICAgZ2V0KCIvY29uZmVyZW5jZSIsIGNvbmZlcmVuY2VDb250cm9sbGVyLmluZGV4LCBuZXcgTXVzdGFjaGVUZW1wbGF0ZUVuZ2luZSgpKTsKICAgIHBvc3QoIi9jb25mZXJlbmNlIiwgY29uZmVyZW5jZUNvbnRyb2xsZXIuam9pbik7CiAgICBwb3N0KCIvY29uZmVyZW5jZS9jb25uZWN0IiwgY29uZmVyZW5jZUNvbnRyb2xsZXIuY29ubmVjdCk7CgogICAgLyoqCiAgICAgKiBEZWZpbmVzIHJvdXRlcyBmb3IgZXZlcnl0aGluZyByZWxhdGVkIHRvIGJyb2FkY2FzdCBjYWxscwogICAgICovCiAgICBnZXQoIi9icm9hZGNhc3QiLCBicm9hZGNhc3RDb250cm9sbGVyLmluZGV4LCBuZXcgTXVzdGFjaGVUZW1wbGF0ZUVuZ2luZSgpKTsKICAgIHBvc3QoIi9icm9hZGNhc3QvcmVjb3JkIiwgYnJvYWRjYXN0Q29udHJvbGxlci5yZWNvcmQpOwogICAgcG9zdCgiL2Jyb2FkY2FzdC9oYW5ndXAiLCBicm9hZGNhc3RDb250cm9sbGVyLmhhbmd1cCk7CiAgICBwb3N0KCIvYnJvYWRjYXN0L3NlbmQiLCBicm9hZGNhc3RDb250cm9sbGVyLnNlbmQsIG5ldyBNdXN0YWNoZVRlbXBsYXRlRW5naW5lKCkpOwogICAgcG9zdCgiL2Jyb2FkY2FzdC9wbGF5IiwgYnJvYWRjYXN0Q29udHJvbGxlci5wbGF5KTsKCiAgICAvKioKICAgICAqIERlZmluZXMgcm91dGVzIGZvciBldmVyeXRoaW5nIHJlbGF0ZWQgdG8gcmVjb3JkaW5ncwogICAgICovCiAgICBnZXQoIi9yZWNvcmRpbmcvaW5kZXgiLCByZWNvcmRpbmdDb250cm9sbGVyLmluZGV4KTsKICAgIHBvc3QoIi9yZWNvcmRpbmcvY3JlYXRlIiwgcmVjb3JkaW5nQ29udHJvbGxlci5jcmVhdGUpOwogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/conferencebroadcast/controllers/ConferenceController.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QuY29udHJvbGxlcnM7CgppbXBvcnQgY29tLnR3aWxpby5jb25mZXJlbmNlYnJvYWRjYXN0LmxpYi5BcHBTZXR1cDsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnZlcmJzLio7CmltcG9ydCBzcGFyay5Nb2RlbEFuZFZpZXc7CmltcG9ydCBzcGFyay5SZXF1ZXN0OwppbXBvcnQgc3BhcmsuUm91dGU7CmltcG9ydCBzcGFyay5UZW1wbGF0ZVZpZXdSb3V0ZTsKCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgpAU3VwcHJlc3NXYXJuaW5ncyh7InJhd3R5cGVzIiwgInVuY2hlY2tlZCJ9KQpwdWJsaWMgY2xhc3MgQ29uZmVyZW5jZUNvbnRyb2xsZXIgewogIEFwcFNldHVwIGFwcFNldHVwOwoKICBwdWJsaWMgQ29uZmVyZW5jZUNvbnRyb2xsZXIoKSB7CiAgICB0aGlzLmFwcFNldHVwID0gbmV3IEFwcFNldHVwKCk7CiAgfQoKICBwdWJsaWMgQ29uZmVyZW5jZUNvbnRyb2xsZXIoQXBwU2V0dXAgYXBwU2V0dXApIHsKICAgIHRoaXMuYXBwU2V0dXAgPSBhcHBTZXR1cDsKICB9CgogIHB1YmxpYyBSb3V0ZSBqb2luID0gKHJlcXVlc3QsIHJlc3BvbnNlKSAtPiB7CiAgICByZXNwb25zZS50eXBlKCJhcHBsaWNhdGlvbi94bWwiKTsKCiAgICByZXR1cm4gZ2V0WE1MSm9pblJlc3BvbnNlKCk7CiAgfTsKCiAgcHVibGljIFRlbXBsYXRlVmlld1JvdXRlIGluZGV4ID0gKHJlcXVlc3QsIHJlc3BvbnNlKSAtPiB7CiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG1hcCA9IG5ldyBIYXNoTWFwKCk7CiAgICBTdHJpbmcgbnVtYmVyID0gYXBwU2V0dXAuZ2V0Q29uZmVyZW5jZU51bWJlcigpOwogICAgbWFwLnB1dCgiY29uZmVyZW5jZV9udW1iZXIiLCBudW1iZXIpOwoKICAgIHJldHVybiBuZXcgTW9kZWxBbmRWaWV3KG1hcCwgImNvbmZlcmVuY2UubXVzdGFjaGUiKTsKICB9OwoKICBwdWJsaWMgUm91dGUgY29ubmVjdCA9IChyZXF1ZXN0LCByZXNwb25zZSkgLT4gewogICAgcmVzcG9uc2UudHlwZSgiYXBwbGljYXRpb24veG1sIik7CgogICAgcmV0dXJuIGdldFhNTENvbm5lY3RSZXNwb25zZShyZXF1ZXN0KTsKICB9OwoKICAvKioKICAgKiBHZW5lcmF0ZXMgdGhlIHhtbCBuZWNlc3NhcnkgdG8gYXNrIHRoZSB1c2VyIHdoYXQgcm9sZSB3aWxsIGJlIHVzZWQgdG8gam9pbiB0aGUgY2FsbAogICAqIEByZXR1cm4gWE1MIHJlc3BvbnNlCiAgICovCiAgcHVibGljIFN0cmluZyBnZXRYTUxKb2luUmVzcG9uc2UoKSB7CiAgICBUd2lNTFJlc3BvbnNlIHR3aW1sUmVzcG9uc2UgPSBuZXcgVHdpTUxSZXNwb25zZSgpOwoKICAgIFN0cmluZyBkZWZhdWx0TWVzc2FnZSA9CiAgICAgICAgIllvdSBhcmUgYWJvdXQgdG8gam9pbiB0aGUgUmFwaWQgUmVzcG9uc2UgY29uZmVyZW5jZS4iOwogICAgU2F5IHNheU1lc3NhZ2UgPSBuZXcgU2F5KGRlZmF1bHRNZXNzYWdlKTsKICAgIFNheSBzYXlPcHRpb24xID0gbmV3IFNheSgiUHJlc3MgMSB0byBqb2luIGFzIGEgbGlzdGVuZXIuIik7CiAgICBTYXkgc2F5T3B0aW9uMiA9IG5ldyBTYXkoIlByZXNzIDIgdG8gam9pbiBhcyBhIHNwZWFrZXIuIik7CiAgICBTYXkgc2F5T3B0aW9uMyA9IG5ldyBTYXkoIlByZXNzIDMgdG8gam9pbiBhcyB0aGUgbW9kZXJhdG9yLiIpOwogICAgR2F0aGVyIGdhdGhlciA9IG5ldyBHYXRoZXIoKTsKICAgIGdhdGhlci5zZXRBY3Rpb24oIi9jb25mZXJlbmNlL2Nvbm5lY3QiKTsKICAgIGdhdGhlci5zZXRNZXRob2QoIlBPU1QiKTsKCiAgICB0cnkgewogICAgICB0d2ltbFJlc3BvbnNlLmFwcGVuZChzYXlNZXNzYWdlKTsKICAgICAgZ2F0aGVyLmFwcGVuZChzYXlPcHRpb24xKTsKICAgICAgZ2F0aGVyLmFwcGVuZChzYXlPcHRpb24yKTsKICAgICAgZ2F0aGVyLmFwcGVuZChzYXlPcHRpb24zKTsKICAgICAgdHdpbWxSZXNwb25zZS5hcHBlbmQoZ2F0aGVyKTsKICAgIH0gY2F0Y2ggKFR3aU1MRXhjZXB0aW9uIGUpIHsKICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJUd2lsaW8ncyByZXNwb25zZSBidWlsZGluZyBlcnJvciIpOwogICAgfQoKICAgIHJldHVybiB0d2ltbFJlc3BvbnNlLnRvWE1MKCk7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIG5lY2Vzc2FyeSB4bWwgdG8gam9pbiB0aGUgY29uZmVyZW5jZSBjYWxsCiAgICogQHBhcmFtIHJlcXVlc3QKICAgKiBAcmV0dXJuIFhNTCBzdHJpbmcKICAgKi8KICBwdWJsaWMgU3RyaW5nIGdldFhNTENvbm5lY3RSZXNwb25zZShSZXF1ZXN0IHJlcXVlc3QpIHsKICAgIEJvb2xlYW4gbXV0ZWQgPSBmYWxzZTsKICAgIEJvb2xlYW4gbW9kZXJhdG9yID0gZmFsc2U7CiAgICBTdHJpbmcgZGlnaXRzID0gcmVxdWVzdC5xdWVyeVBhcmFtcygiRGlnaXRzIik7CgogICAgaWYgKGRpZ2l0cy5lcXVhbHMoIjEiKSkgewogICAgICBtdXRlZCA9IHRydWU7CiAgICB9CiAgICBpZiAoZGlnaXRzLmVxdWFscygiMyIpKSB7CiAgICAgIG1vZGVyYXRvciA9IHRydWU7CiAgICB9CiAgICBUd2lNTFJlc3BvbnNlIHR3aW1sUmVzcG9uc2UgPSBuZXcgVHdpTUxSZXNwb25zZSgpOwoKICAgIFN0cmluZyBkZWZhdWx0TWVzc2FnZSA9ICJZb3UgaGF2ZSBqb2luZWQgdGhlIGNvbmZlcmVuY2UuIjsKICAgIFNheSBzYXlNZXNzYWdlID0gbmV3IFNheShkZWZhdWx0TWVzc2FnZSk7CgogICAgRGlhbCBkaWFsID0gbmV3IERpYWwoKTsKICAgIENvbmZlcmVuY2UgY29uZmVyZW5jZSA9IG5ldyBDb25mZXJlbmNlKCJSYXBpZFJlc3BvbnNlUm9vbSIpOwogICAgY29uZmVyZW5jZS5zZXRXYWl0VXJsKCJodHRwOi8vdHdpbWxldHMuY29tL2hvbGRtdXNpYz9CdWNrZXQ9Y29tLnR3aWxpby5tdXNpYy5hbWJpZW50Iik7CiAgICBjb25mZXJlbmNlLnNldE11dGVkKG11dGVkKTsKICAgIGNvbmZlcmVuY2Uuc2V0U3RhcnRDb25mZXJlbmNlT25FbnRlcihtb2RlcmF0b3IpOwogICAgY29uZmVyZW5jZS5zZXRFbmRDb25mZXJlbmNlT25FeGl0KG1vZGVyYXRvcik7CiAgICB0cnkgewogICAgICBkaWFsLmFwcGVuZChjb25mZXJlbmNlKTsKICAgICAgdHdpbWxSZXNwb25zZS5hcHBlbmQoc2F5TWVzc2FnZSk7CiAgICAgIHR3aW1sUmVzcG9uc2UuYXBwZW5kKGRpYWwpOwogICAgfSBjYXRjaCAoVHdpTUxFeGNlcHRpb24gZSkgewogICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlR3aWxpbydzIHJlc3BvbnNlIGJ1aWxkaW5nIGVycm9yIik7CiAgICB9CiAgICByZXR1cm4gdHdpbWxSZXNwb25zZS50b1hNTCgpOwogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/conferencebroadcast/controllers/RecordingController.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QuY29udHJvbGxlcnM7CgppbXBvcnQgY29tLnR3aWxpby5jb25mZXJlbmNlYnJvYWRjYXN0LmV4Y2VwdGlvbnMuVW5kZWZpbmVkRW52aXJvbm1lbnRWYXJpYWJsZUV4Y2VwdGlvbjsKaW1wb3J0IGNvbS50d2lsaW8uY29uZmVyZW5jZWJyb2FkY2FzdC5saWIuQXBwU2V0dXA7CmltcG9ydCBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QubGliLlJlY29yZGluZ1VyaVRyYW5zZm9ybWVyOwppbXBvcnQgY29tLnR3aWxpby5zZGsuVHdpbGlvUmVzdENsaWVudDsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLlR3aWxpb1Jlc3RFeGNlcHRpb247CmltcG9ydCBjb20udHdpbGlvLnNkay5yZXNvdXJjZS5pbnN0YW5jZS5SZWNvcmRpbmc7CmltcG9ydCBjb20udHdpbGlvLnNkay5yZXNvdXJjZS5saXN0LlJlY29yZGluZ0xpc3Q7CmltcG9ydCBvcmcuanNvbi5zaW1wbGUuSlNPTkFycmF5OwppbXBvcnQgb3JnLmpzb24uc2ltcGxlLkpTT05PYmplY3Q7CmltcG9ydCBzcGFyay5SZXF1ZXN0OwppbXBvcnQgc3BhcmsuUm91dGU7CgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgpwdWJsaWMgY2xhc3MgUmVjb3JkaW5nQ29udHJvbGxlciB7CiAgQXBwU2V0dXAgYXBwU2V0dXA7CiAgVHdpbGlvUmVzdENsaWVudCBjbGllbnQ7CgogIHB1YmxpYyBSZWNvcmRpbmdDb250cm9sbGVyKCkgewogICAgdGhpcy5hcHBTZXR1cCA9IG5ldyBBcHBTZXR1cCgpOwogICAgdHJ5IHsKICAgICAgdGhpcy5jbGllbnQgPSBuZXcgVHdpbGlvUmVzdENsaWVudChhcHBTZXR1cC5nZXRBY2NvdW50U2lkKCksIGFwcFNldHVwLmdldEF1dGhUb2tlbigpKTsKICAgIH0gY2F0Y2ggKFVuZGVmaW5lZEVudmlyb25tZW50VmFyaWFibGVFeGNlcHRpb24gZSkgewogICAgICBTeXN0ZW0ub3V0LnByaW50bG4oZS5nZXRNZXNzYWdlKCkpOwogICAgfQogIH0KCiAgcHVibGljIFJlY29yZGluZ0NvbnRyb2xsZXIoQXBwU2V0dXAgYXBwU2V0dXAsIFR3aWxpb1Jlc3RDbGllbnQgY2xpZW50KSB7CiAgICB0aGlzLmFwcFNldHVwID0gYXBwU2V0dXA7CiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDsKICB9CgogIHB1YmxpYyBSb3V0ZSBpbmRleCA9IChyZXF1ZXN0LCByZXNwb25zZSkgLT4gewogICAgcmVzcG9uc2UudHlwZSgiYXBwbGljYXRpb24vanNvbiIpOwoKICAgIHJldHVybiBnZXRSZWNvcmRpbmdzQXNKU09OKCk7CiAgfTsKCiAgcHVibGljIFJvdXRlIGNyZWF0ZSA9IChyZXF1ZXN0LCByZXNwb25zZSkgLT4gewogICAgaW50IHN0YXR1cyA9IGNyZWF0ZVJlY29yZGluZyhyZXF1ZXN0KTsKICAgIHJlc3BvbnNlLnN0YXR1cyhzdGF0dXMpOwogICAgcmV0dXJuICIiOwogIH07CgogIC8qKgogICAqIEZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIHJlY29yZGluZyByZW1vdGVseSB1c2luZyBUd2lsaW8ncyByZXN0IGNsaWVudAogICAqIEBwYXJhbSByZXF1ZXN0IFJlcXVlc3QgaG9sZHMgdGhlIHBob25lX251bWJlciBwYXJhbWV0ZXIKICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHN0YXR1cyBvZiB0aGUgcmVxdWVzdAogICAqLwogIHB1YmxpYyBpbnQgY3JlYXRlUmVjb3JkaW5nKFJlcXVlc3QgcmVxdWVzdCkgewogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBuZXcgSGFzaE1hcDw+KCk7CiAgICBTdHJpbmcgcGhvbmVOdW1iZXIgPSByZXF1ZXN0LnF1ZXJ5UGFyYW1zKCJwaG9uZV9udW1iZXIiKTsKICAgIFN0cmluZyB0d2lsaW9OdW1iZXIgPSBudWxsOwogICAgdHJ5IHsKICAgICAgdHdpbGlvTnVtYmVyID0gYXBwU2V0dXAuZ2V0VHdpbGlvUGhvbmVOdW1iZXIoKTsKICAgIH0gY2F0Y2ggKFVuZGVmaW5lZEVudmlyb25tZW50VmFyaWFibGVFeGNlcHRpb24gZSkgewogICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgfQogICAgU3RyaW5nIHBhdGggPSByZXF1ZXN0LnVybCgpLnJlcGxhY2UocmVxdWVzdC51cmkoKSwgIiIpICsgIi9icm9hZGNhc3QvcmVjb3JkIjsKCiAgICBwYXJhbXMucHV0KCJGcm9tIiwgdHdpbGlvTnVtYmVyKTsKICAgIHBhcmFtcy5wdXQoIlRvIiwgcGhvbmVOdW1iZXIpOwogICAgcGFyYW1zLnB1dCgiVXJsIiwgcGF0aCk7CgogICAgdHJ5IHsKICAgICAgY2xpZW50LmdldEFjY291bnQoKS5nZXRDYWxsRmFjdG9yeSgpLmNyZWF0ZShwYXJhbXMpOwogICAgfSBjYXRjaCAoVHdpbGlvUmVzdEV4Y2VwdGlvbiBlKSB7CiAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiVHdpbGlvIHJlc3QgY2xpZW50IGVycm9yICIgKyBlLmdldEVycm9yTWVzc2FnZSgpKTsKICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJSZW1lbWJlciBub3QgdG8gdXNlIGxvY2FsaG9zdCB0byBhY2Nlc3MgdGhpcyBhcHAsIHVzZSB5b3VyIG5ncm9rIFVSTCIpOwogICAgICByZXR1cm4gZS5nZXRFcnJvckNvZGUoKTsKICAgIH0KICAgIHJldHVybiAyMDA7CiAgfQoKICAvKioKICAgKiBDcmVhdGVzIGEgSlNPTiBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgdXJsIGFuZCBkYXRlIG9mIGFsbCB0aGUgdXNlcidzIHJlY29yZGluZ3MKICAgKiBAcmV0dXJuIFJldHVybnMgYSBKU09OIHN0cmluZwogICAqLwogIHB1YmxpYyBTdHJpbmcgZ2V0UmVjb3JkaW5nc0FzSlNPTigpIHsKICAgIFJlY29yZGluZ0xpc3QgcmVjb3JkaW5ncyA9IGNsaWVudC5nZXRBY2NvdW50KCkuZ2V0UmVjb3JkaW5ncygpOwogICAgSlNPTkFycmF5IGpzb25SZWNvcmRpbmdzID0gbmV3IEpTT05BcnJheSgpOwogICAgU2ltcGxlRGF0ZUZvcm1hdCBkYXRlRm9ybWF0ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoInl5eXktTS1kZCBISDptbTpzcyIpOwoKICAgIGZvciAoUmVjb3JkaW5nIHJlY29yZGluZyA6IHJlY29yZGluZ3MpIHsKICAgICAgSlNPTk9iamVjdCBvYmogPSBuZXcgSlNPTk9iamVjdCgpOwogICAgICBvYmoucHV0KCJ1cmwiLCBSZWNvcmRpbmdVcmlUcmFuc2Zvcm1lci50cmFuc2Zvcm0ocmVjb3JkaW5nLmdldFByb3BlcnR5KCJ1cmkiKSkpOwogICAgICBvYmoucHV0KCJkYXRlIiwgZGF0ZUZvcm1hdC5mb3JtYXQocmVjb3JkaW5nLmdldERhdGVDcmVhdGVkKCkpKTsKICAgICAganNvblJlY29yZGluZ3MuYWRkKG9iaik7CiAgICB9CgogICAgcmV0dXJuIGpzb25SZWNvcmRpbmdzLnRvSlNPTlN0cmluZygpOwogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/conferencebroadcast/controllers/BroadcastController.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNvbmZlcmVuY2Vicm9hZGNhc3QuY29udHJvbGxlcnM7CgppbXBvcnQgY29tLnR3aWxpby5jb25mZXJlbmNlYnJvYWRjYXN0LmV4Y2VwdGlvbnMuVW5kZWZpbmVkRW52aXJvbm1lbnRWYXJpYWJsZUV4Y2VwdGlvbjsKaW1wb3J0IGNvbS50d2lsaW8uY29uZmVyZW5jZWJyb2FkY2FzdC5saWIuQXBwU2V0dXA7CmltcG9ydCBjb20udHdpbGlvLnNkay5Ud2lsaW9SZXN0Q2xpZW50OwppbXBvcnQgY29tLnR3aWxpby5zZGsuVHdpbGlvUmVzdEV4Y2VwdGlvbjsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnJlc291cmNlLmZhY3RvcnkuQ2FsbEZhY3Rvcnk7CmltcG9ydCBjb20udHdpbGlvLnNkay52ZXJicy4qOwppbXBvcnQgc3BhcmsuTW9kZWxBbmRWaWV3OwppbXBvcnQgc3BhcmsuUmVxdWVzdDsKaW1wb3J0IHNwYXJrLlJvdXRlOwppbXBvcnQgc3BhcmsuVGVtcGxhdGVWaWV3Um91dGU7CgppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKcHVibGljIGNsYXNzIEJyb2FkY2FzdENvbnRyb2xsZXIgewogIEFwcFNldHVwIGFwcFNldHVwOwogIFR3aWxpb1Jlc3RDbGllbnQgY2xpZW50OwoKICBwdWJsaWMgQnJvYWRjYXN0Q29udHJvbGxlcigpIHsKICAgIHRoaXMuYXBwU2V0dXAgPSBuZXcgQXBwU2V0dXAoKTsKICAgIHRyeSB7CiAgICAgIHRoaXMuY2xpZW50ID0gbmV3IFR3aWxpb1Jlc3RDbGllbnQoYXBwU2V0dXAuZ2V0QWNjb3VudFNpZCgpLCBhcHBTZXR1cC5nZXRBdXRoVG9rZW4oKSk7CiAgICB9IGNhdGNoIChVbmRlZmluZWRFbnZpcm9ubWVudFZhcmlhYmxlRXhjZXB0aW9uIGUpIHsKICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJSZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZSB1bmRlZmluZWQiKTsKICAgIH0KICB9CgogIHB1YmxpYyBCcm9hZGNhc3RDb250cm9sbGVyKEFwcFNldHVwIGFwcFNldHVwLCBUd2lsaW9SZXN0Q2xpZW50IGNsaWVudCkgewogICAgdGhpcy5hcHBTZXR1cCA9IGFwcFNldHVwOwogICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7CiAgfQoKICBwdWJsaWMgVGVtcGxhdGVWaWV3Um91dGUgaW5kZXggPSAocmVxdWVzdCwgcmVzcG9uc2UpIC0+IHsKICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gbWFwID0gbmV3IEhhc2hNYXAoKTsKCiAgICByZXR1cm4gbmV3IE1vZGVsQW5kVmlldyhtYXAsICJicm9hZGNhc3QubXVzdGFjaGUiKTsKICB9OwoKICBwdWJsaWMgUm91dGUgcmVjb3JkID0gKHJlcXVlc3QsIHJlc3BvbnNlKSAtPiB7CiAgICByZXNwb25zZS50eXBlKCJhcHBsaWNhdGlvbi94bWwiKTsKCiAgICByZXR1cm4gZ2V0WE1MUmVjb3JkUmVzcG9uc2UoKTsKICB9OwoKICBwdWJsaWMgUm91dGUgaGFuZ3VwID0gKHJlcXVlc3QsIHJlc3BvbnNlKSAtPiB7CiAgICByZXNwb25zZS50eXBlKCJhcHBsaWNhdGlvbi94bWwiKTsKCiAgICByZXR1cm4gZ2V0WE1MSGFuZ3VwUmVzcG9uc2UoKTsKICB9OwoKICBwdWJsaWMgVGVtcGxhdGVWaWV3Um91dGUgc2VuZCA9IChyZXF1ZXN0LCByZXNwb25zZSkgLT4gewogICAgTWFwPFN0cmluZywgU3RyaW5nPiBtYXAgPSBuZXcgSGFzaE1hcCgpOwogICAgYnJvYWRjYXN0U2VuZChyZXF1ZXN0KTsKCiAgICBtYXAucHV0KCJtZXNzYWdlIiwgInRydWUiKTsKICAgIG1hcC5wdXQoIm5vdGljZSIsICJCcm9hZGNhc3Qgd2FzIHN1Y2Nlc3NmdWxseSBzZW50Iik7CgogICAgcmV0dXJuIG5ldyBNb2RlbEFuZFZpZXcobWFwLCAiYnJvYWRjYXN0Lm11c3RhY2hlIik7CiAgfTsKCiAgcHVibGljIFJvdXRlIHBsYXkgPSAocmVxdWVzdCwgcmVzcG9uc2UpIC0+IHsKICAgIHJldHVybiBnZXRYTUxQbGF5UmVzcG9uc2UocmVxdWVzdCk7CiAgfTsKCiAgLyoqCiAgICogUmV0dXJucyB0aGUgeG1sIHJlc3BvbnNlIHRoYXQgd2lsbCBwbGF5IHRoZSByZWNvcmRlZCBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gVVJMCiAgICogQHBhcmFtIHJlcXVlc3QKICAgKiBAcmV0dXJuIHhtbCByZXNwb25zZQogICAqLwogIHB1YmxpYyBTdHJpbmcgZ2V0WE1MUGxheVJlc3BvbnNlKFJlcXVlc3QgcmVxdWVzdCkgewogICAgVHdpTUxSZXNwb25zZSB0d2lNTFJlc3BvbnNlID0gbmV3IFR3aU1MUmVzcG9uc2UoKTsKICAgIFN0cmluZyByZWNvcmRpbmdVcmwgPSByZXF1ZXN0LnF1ZXJ5UGFyYW1zKCJyZWNvcmRpbmdfdXJsIik7CgogICAgUGxheSBwbGF5ID0gbmV3IFBsYXkocmVjb3JkaW5nVXJsKTsKCiAgICB0cnkgewogICAgICB0d2lNTFJlc3BvbnNlLmFwcGVuZChwbGF5KTsKICAgIH0gY2F0Y2ggKFR3aU1MRXhjZXB0aW9uIGUpIHsKICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJVbmFibGUgdG8gY3JlYXRlIHR3aW1sIHJlc3BvbnNlIik7CiAgICB9CgogICAgcmV0dXJuIHR3aU1MUmVzcG9uc2UudG9Fc2NhcGVkWE1MKCk7CiAgfQoKICAvKioKICAgKiBNZXRob2QgdGhhdCB3aWxsIGNyZWF0ZSB0aGUgcmVtb3RlIGNhbGxzIHVzaW5nIFR3aWxpbydzIHJlc3QgY2xpZW50IGZvciBldmVyeSBudW1iZXIKICAgKiBlc3BlY2lmaWVkIGluIHRoZSBDU1YuCiAgICogQHBhcmFtIHJlcXVlc3QKICAgKi8KICBwdWJsaWMgdm9pZCBicm9hZGNhc3RTZW5kKFJlcXVlc3QgcmVxdWVzdCkgewogICAgU3RyaW5nIG51bWJlcnMgPSByZXF1ZXN0LnF1ZXJ5UGFyYW1zKCJudW1iZXJzIik7CiAgICBTdHJpbmcgcmVjb3JkaW5nVXJsID0gcmVxdWVzdC5xdWVyeVBhcmFtcygicmVjb3JkaW5nX3VybCIpOwogICAgU3RyaW5nW10gcGFyc2VkTnVtYmVycyA9IG51bWJlcnMuc3BsaXQoIiwiKTsKICAgIFN0cmluZyB1cmwgPSByZXF1ZXN0LnVybCgpLnJlcGxhY2UocmVxdWVzdC51cmkoKSwgIiIpICsgIi9icm9hZGNhc3QvcGxheT9yZWNvcmRpbmdfdXJsPSIgKyByZWNvcmRpbmdVcmw7CiAgICBTdHJpbmcgdHdpbGlvTnVtYmVyID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIHR3aWxpb051bWJlciA9IGFwcFNldHVwLmdldFR3aWxpb1Bob25lTnVtYmVyKCk7CiAgICB9IGNhdGNoIChVbmRlZmluZWRFbnZpcm9ubWVudFZhcmlhYmxlRXhjZXB0aW9uIGUpIHsKICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgIH0KCiAgICBDYWxsRmFjdG9yeSBjYWxsRmFjdG9yeSA9IGNsaWVudC5nZXRBY2NvdW50KCkuZ2V0Q2FsbEZhY3RvcnkoKTsKCiAgICBmb3IgKFN0cmluZyBudW1iZXIgOiBwYXJzZWROdW1iZXJzKSB7CiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zID0gbmV3IEhhc2hNYXA8PigpOwogICAgICBwYXJhbXMucHV0KCJGcm9tIiwgdHdpbGlvTnVtYmVyKTsKICAgICAgcGFyYW1zLnB1dCgiVG8iLCBudW1iZXIpOwogICAgICBwYXJhbXMucHV0KCJVcmwiLCB1cmwpOwoKICAgICAgdHJ5IHsKICAgICAgICBjYWxsRmFjdG9yeS5jcmVhdGUocGFyYW1zKTsKICAgICAgfSBjYXRjaCAoVHdpbGlvUmVzdEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJUd2lsaW8gcmVzdCBjbGllbnQgZXJyb3IgIiArIGUuZ2V0RXJyb3JNZXNzYWdlKCkpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiUmVtZW1iZXIgbm90IHRvIHVzZSBsb2NhbGhvc3QgdG8gYWNjZXNzIHRoaXMgYXBwLCB1c2UgeW91ciBuZ3JvayBVUkwiKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogVGhpcyBYTUwgcmVzcG9uc2UgaXMgbmVjZXNzYXJ5IHRvIGVuZCB0aGUgY2FsbCB3aGVuIGEgbmV3IHJlY29yZGluZyBpcyBtYWRlCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyBTdHJpbmcgZ2V0WE1MSGFuZ3VwUmVzcG9uc2UoKSB7CiAgICBUd2lNTFJlc3BvbnNlIHR3aU1MUmVzcG9uc2UgPSBuZXcgVHdpTUxSZXNwb25zZSgpOwoKICAgIFNheSBzYXkgPSBuZXcgU2F5KCJZb3VyIHJlY29yZGluZyBoYXMgYmVlbiBzYXZlZC4gR29vZCBieWUuIik7CiAgICBIYW5ndXAgaGFuZ3VwID0gbmV3IEhhbmd1cCgpOwoKICAgIHRyeSB7CiAgICAgIHR3aU1MUmVzcG9uc2UuYXBwZW5kKHNheSk7CiAgICAgIHR3aU1MUmVzcG9uc2UuYXBwZW5kKGhhbmd1cCk7CiAgICB9IGNhdGNoIChUd2lNTEV4Y2VwdGlvbiBlKSB7CiAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiVW5hYmxlIHRvIGNyZWF0ZSB0d2ltbCByZXNwb25zZSIpOwogICAgfQoKICAgIHJldHVybiB0d2lNTFJlc3BvbnNlLnRvWE1MKCk7CiAgfQoKICBwdWJsaWMgU3RyaW5nIGdldFhNTFJlY29yZFJlc3BvbnNlKCkgewogICAgVHdpTUxSZXNwb25zZSB0d2lNTFJlc3BvbnNlID0gbmV3IFR3aU1MUmVzcG9uc2UoKTsKCiAgICBTYXkgc2F5ID0gbmV3IFNheSgiUGxlYXNlIHJlY29yZCB5b3VyIG1lc3NhZ2UgYWZ0ZXIgdGhlIGJlZXAuIFByZXNzIHN0YXIgdG8gZW5kIHlvdXIgcmVjb3JkaW5nLiIpOwogICAgUmVjb3JkIHJlY29yZCA9IG5ldyBSZWNvcmQoKTsKICAgIHJlY29yZC5zZXRBY3Rpb24oIi9icm9hZGNhc3QvaGFuZ3VwIik7CiAgICByZWNvcmQuc2V0TWV0aG9kKCJQT1NUIik7CiAgICByZWNvcmQuc2V0RmluaXNoT25LZXkoIioiKTsKCiAgICB0cnkgewogICAgICB0d2lNTFJlc3BvbnNlLmFwcGVuZChzYXkpOwogICAgICB0d2lNTFJlc3BvbnNlLmFwcGVuZChyZWNvcmQpOwogICAgfSBjYXRjaCAoVHdpTUxFeGNlcHRpb24gZSkgewogICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlVuYWJsZSB0byBjcmVhdGUgVHdpbWwgUmVzcG9uc2UiKTsKICAgIH0KCiAgICByZXR1cm4gdHdpTUxSZXNwb25zZS50b1hNTCgpOwogIH0KfQo=</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/conference-broadcast-spark" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>